{% load static %}
{% load base64_filters %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ profile.username }} on Minium</title>
    <link rel="icon" href="{% static 'images/favicon.ico' %}">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <main class="w-screen h-screen flex flex-col overflow-hidden">
        {% include 'components/base_header.html' %}
        <div class="w-full h-0 flex flex-grow">
            <div class="w-[70%] h-full px-8 py-4 flex flex-1 flex-col gap-4 relative">
                <h1 class="font-semibold text-3xl">{{ profile.username }}'s posts</h1>
                <div class="w-full h-full flex flex-col gap-2 overflow-y-auto ">
                    {% if posts %}
                        {% for post in posts %}
                            {% include 'components/post_card.html' with post=post %}
                        {% endfor %}
                    {% else %}
                        <span class="text-sm mt-5">This profile doesn't have any post.</span>
                    {% endif %}
                </div>
            </div>
            <div class="w-[30%] h-full flex flex-col gap-4 items-center pt-20 border-l border-zinc-300">
                <div class="w-28 h-28 rounded-full flex items-center justify-center border border-black/70">
                    {% if profile.picture %}
                        <div style="background-image: url('data:image/jpeg;base64,{{ profile.picture|base64encode }}')" class="w-full h-full rounded-full bg-center bg-cover"></div>
                    {% else %}
                        <img src="{% static 'images/user_default_icon.png' %}" alt="User default image" class="w-full h-full">
                    {% endif %}
                </div>
                <span class="font-semibold">{{ profile.username }}</span>
                <p class="text-sm text-gray-500">
                    {% if profile.bio %}
                        {{ profile.bio }}
                    {% else %}
                        No bio yet.
                    {% endif %}
                </p>
                {% if profile.username == request.user.username %}
                    <div class="absolute bottom-6 flex flex-col gap-2 items-center justify-center">
                        <a href="{% url 'blog:update_profile' username=request.user.username %}" class="w-28 h-7 flex items-center justify-center text-sm rounded-3xl bg-green-500 text-white hover:bg-green-500/90">Edit profile</a>
                        <a href="{% url 'accounts:logout' %}" class="cursor-pointer text-sm hover:underline">Sign out</a>
                    </div>
                {% endif %}
                {% if profile.username != request.user.username %}
                    <a href="{% url 'blog:follow_user' username=profile.username category='profile' q='None' %}" class="cursor-pointer rounded-3xl text-sm px-5 py-1 absolute bottom-6 text-white hover:opacity-85 {% if profile.is_followed %}bg-red-500{% else %}bg-green-500{% endif %}">
                        {% if profile.is_followed %}
                            Unfollow
                        {% else %}
                            Follow
                        {% endif %}
                    </a>
                {% endif %}
            </div>
        </div>
    </main>
</body>
</html>
